# site-modules/profile/plans/ssh_config.yaml

description: "Configure SSH to disable StrictHostKeyChecking"

parameters:
  targets:
    type: TargetSpec
    description: "The targets to run the plan on"
    default: all

steps:
  - name: upload_config
    description: "Set SSH Config Content"
    targets: $targets
    command: "echo 'Host *\n    StrictHostKeyChecking no\n    UserKnownHostsFile /dev/null' > ~/.ssh/config"

  - name: set_permissions
    description: "Set correct permissions on SSH config"
    targets: $targets
    command: "chmod 600 ~/.ssh/config"

return: ${results}
